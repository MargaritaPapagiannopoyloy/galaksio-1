<div class="table collection-table" ng-controller="DatasetListController as controller" ng-init="dataType='collection'">
	<div class="collection-table-header">
		<span></span>
		<span></span>
		<span>Collection name</span>
		<span>Type</span>
	</div>
	<div class="collection-table-body">
		<span ng-if="isLoading === true || displayedHistory.content === undefined">
			<span style="width:100%; text-align:center;">
				<i class="fa fa-spinner fa-pulse fa-fw"></i> Loading collections...
			</span>
		</span>
		<span ng-if="(displayedHistory.content !== undefined && displayedHistory.content.length === 0)">
			<span style="width:100%; text-align:center;"><i>No data</i></span>
		</span>

		<div ng-repeat="dataset in filtered = (displayedHistory.content | filter:filterDatasets) | orderBy:'-' | limitTo:maxDatasets"
		ng-class="{'deletedDataset' : dataset.deleted, 'hiddenDataset': !dataset.visible, 'selectedDataset': (dataset.id === selectedDataset[0].id)}"
		ng-click="controller.setSelectedDatasetHandler(this);">
		<span style="text-align:center;">{{$index + 1}}</span>
		<span><a class="clickable" ng-click="collapsed=!(collapsed===true)"><i ng-class="(collapsed?'fa fa-caret-down':'fa fa-caret-right')"></i></a></span>
		<span style="text-align:left; word-wrap: break-word;">{{dataset.name}}</span>
		<span>{{getCollectionType(dataset)}}</span>
		<div ng-show="collapsed" style="width:100%; height: 50px; background-color:#333;"></div>
	</div>
</div>

<p>Showing {{filtered.length}}</p>
<div style="text-align: center; padding: 10px;" ng-show="displayedHistory.content.length > maxDatasets">
	<a class="btn btn-default" ui-sref="histories()">
		<i class="fa fa-sign-out fa-fw"></i> Show {{displayedHistory.content.length - maxDatasets}} more datasets.
	</a>
</div>
</div>
