(function(){var app=angular.module("workflows.services.workflow-list",[]);app.factory("WorkflowList",["$rootScope",function($rootScope){var workflows={};var tags=[];var filters=[];var tagColors=["yellow","green","red","blue","purple","pink","yellow2","green2","red2","blue2","purple2","pink2"];var old=new Date(0);return{getWorkflows:function(){return Object.values(workflows)},setWorkflows:function(_workflows){workflows={};var workflow;for(var i in _workflows){workflow=_workflows[i];if(workflow.name.search(/^imported: /)!==-1){workflow.name=workflow.name.replace(/imported: /g,"");workflow.imported=true}workflows[workflow.id]=workflow}old=new Date;return this},updateWorkflows:function(_workflows){var workflow;for(var i in _workflows){workflow=_workflows[i];if(workflow.name.search(/^imported: /)!==-1){workflow.name=workflow.name.replace(/imported: /g,"");workflow.imported=true}workflows[workflow.id]=workflow}return this},getWorkflow:function(workflow_id){return workflows[workflow_id]},addWorkflow:function(workflow){workflows[workflow.id]=workflow;return this},deleteWorkflow:function(workflow){delete workflows[workflow.id];return this},getTags:function(){return tags},getTag:function(_tag){for(var i in tags){if(tags[i].name===_tag){return tags[i]}}return null},setTags:function(_tags){tags=_tags;return this},updateTags:function(){var tagsAux={},_tags;var _workflows=this.getWorkflows();for(var i in _workflows){_tags=_workflows[i].tags;for(var j in _tags){tagsAux[_tags[j]]={name:_tags[j],times:tagsAux[_tags[j]]===undefined?1:tagsAux[_tags[j]].times+1}}}tags=Object.keys(tagsAux).map(function(k){return tagsAux[k]});for(var i in tags){tags[i].color=tagColors[i%tagColors.length]}tags.push({name:"All",times:_workflows.length});return this},getFilters:function(){return filters},setFilters:function(_filters){filters=_filters;return this},removeFilter:function(_filter){var pos=filters.indexOf(_filter);if(pos!==-1){filters.splice(pos,1)}return this},getOld:function(){return(new Date-old)/12e4}}}])})();