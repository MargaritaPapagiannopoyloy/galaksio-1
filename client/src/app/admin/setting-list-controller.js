(function(){var app=angular.module("admin.controllers.setting-list",["ui.bootstrap","ang-dialogs","ui.router"]);app.controller("AdminController",function($state,$rootScope,$scope,$http,$uibModal,$dialogs,APP_EVENTS){this.retrieveSettings=function(){$http($rootScope.getHttpRequestConfig("GET","setting-list")).then(function successCallback(response){$scope.settings=response.data.settings;var regInteger=/^\d+$/;for(var i in $scope.settings){if(regInteger.test($scope.settings[i])){$scope.settings[i]=Number.parseInt($scope.settings[i])}else if($scope.settings[i].toLowerCase&&($scope.settings[i].toLowerCase()==="true"||$scope.settings[i].toLowerCase()==="false")){$scope.settings[i]=$scope.settings[i].toLowerCase()==="true"}}if($scope.settings["AUTO_INSTALL"]){me.updateSettingsHandler()}},function errorCallback(response){debugger;var message="Failed when retrieving the list of settings.";$dialogs.showErrorDialog(message,{logMessage:message+" at AdminController:retrieveSettings."});console.error(response.data);document.location.replace("/")});return this};this.updateSettingsHandler=function(){$scope.isLoading=true;if(!($scope.settings.ADMIN_ACCOUNTS instanceof Array)){$scope.settings.ADMIN_ACCOUNTS=$scope.settings.ADMIN_ACCOUNTS.replace(/ /g,"").split(",")}$http($rootScope.getHttpRequestConfig("POST","setting-update",{data:$scope.settings})).then(function successCallback(response){$dialogs.showSuccessDialog("Settings successfully updated. You may need to restart the server to apply the changes.",{logMessage:"Settings updated at AdminController:retrieveHistoryData.",callback:function(){$rootScope.$broadcast(APP_EVENTS.logoutRequired)}});$scope.isLoading=false},function errorCallback(response){$scope.isLoading=false;debugger;var message="Failed when updating the settings.";$dialogs.showErrorDialog(message,{logMessage:message+" at AdminController:updateSettings."});console.error(response.data)});return this};var me=this;setTimeout(function(){me.retrieveSettings()},4e3)})})();