(function(){var app=angular.module("admin.controllers.setting-list",["ui.bootstrap","common.dialogs","ui.router"]);app.controller("AdminController",function($state,$rootScope,$scope,$http,$uibModal,$dialogs){this.retrieveSettings=function(){$http($rootScope.getHttpRequestConfig("GET","setting-list")).then(function successCallback(response){$scope.settings=response.data.settings;for(var i in $scope.settings){if(!isNaN($scope.settings[i])){$scope.settings[i]=Number.parseInt($scope.settings[i])}else if($scope.settings[i].toLowerCase()==="true"||$scope.settings[i].toLowerCase()==="false"){$scope.settings[i]=$scope.settings[i].toLowerCase()==="true"}}},function errorCallback(response){debugger;var message="Failed when retrieving the list of settings.";$dialogs.showErrorDialog(message,{logMessage:message+" at AdminController:retrieveSettings."});console.error(response.data);document.location.replace("/index.html")});return this};this.updateSettingsHandler=function(){$scope.isLoading=true;$http($rootScope.getHttpRequestConfig("POST","setting-update",{data:$scope.settings})).then(function successCallback(response){$dialogs.showSuccessDialog("Settings successfully updated. Restart the server to apply the changes.",{logMessage:"Settings updated at AdminController:retrieveHistoryData."});$scope.isLoading=false},function errorCallback(response){$scope.isLoading=false;debugger;var message="Failed when updating the settings.";$dialogs.showErrorDialog(message,{logMessage:message+" at AdminController:updateSettings."});console.error(response.data)});return this};var me=this;this.retrieveSettings()})})();